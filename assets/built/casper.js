!function(r){"use strict";r.fn.fitVids=function(t){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',e.appendChild(n.childNodes[1])}return t&&r.extend(i,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&t.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var e=r(this).find(t.join(","));(e=(e=e.not("object object")).not(n)).each(function(){var t=r(this);if(!(0<t.parents(n).length||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var e=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("name")){var i="fitvid"+r.fn.fitVids._count;t.attr("name",i),r.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),t.removeAttr("height").removeAttr("width")}})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(t){t.addEventListener("DOMContentLoaded",function(){t.querySelectorAll(".kg-gallery-image img").forEach(function(t){var e=t.closest(".kg-gallery-image"),i=t.attributes.width.value/t.attributes.height.value;e.style.flex=i+" 1 0%"})})}((window,document)),function(e,i){var n=i.querySelector("link[rel=next]");if(n){var r=i.querySelector(".post-feed");if(r){var a=300,s=!1,o=!1,u=e.scrollY,l=e.innerHeight,c=i.documentElement.scrollHeight;e.addEventListener("scroll",m,{passive:!0}),e.addEventListener("resize",f),h()}}function d(){if(404===this.status)return e.removeEventListener("scroll",m),void e.removeEventListener("resize",f);this.response.querySelectorAll(".post-card").forEach(function(t){r.appendChild(i.importNode(t,!0))});var t=this.response.querySelector("link[rel=next]");t?n.href=t.href:(e.removeEventListener("scroll",m),e.removeEventListener("resize",f)),c=i.documentElement.scrollHeight,o=s=!1}function t(){if(!o)if(u+l<=c-a)s=!1;else{o=!0;var t=new e.XMLHttpRequest;t.responseType="document",t.addEventListener("load",d),t.open("GET",n.href),t.send(null)}}function h(){s||e.requestAnimationFrame(t),s=!0}function m(){u=e.scrollY,h()}function f(){l=e.innerHeight,c=i.documentElement.scrollHeight,h()}}(window,document),KudosPlease=function(){function t(i,t){return e?function(t,e){if(""!=e)return t.classList[i](e)}:t}function o(t,e,i){null!=i.status&&(null!=t.getAttribute("data-status")&&c(t,i.status[t.getAttribute("data-status")]),l(t,i.status[e]),t.setAttribute("data-status",e))}function r(t,e,i){l(t,"finish"),o(t,"gamma",i),e=e||!1,amount=h(parseInt(t.getAttribute("data-id"),10),i),e&&(++amount,m(t,"POST",i))}function n(t,e,i){var n=-1;d(e,"finish")||(l(e,"active"),n=setTimeout(function(){c(e,"active"),r(e,!0,i)},i.duration),i.timer[e.getAttribute("data-id")]=n)}function a(t,e,i){1===t.touches.length&&(t.stopPropagation(),t.preventDefault(),n(0,e,i))}function s(t,e,i){d(e,"finish")||(c(e,"active"),clearTimeout(i.timer[e.getAttribute("data-id")]))}function u(e,i,n,r){try{e.addEventListener(i,function(t){n(t,e,r)},!1)}catch(t){e.attachEvent("on"+i,function(t){n(t,e,r)})}}var e=!!document.documentElement.classList,l=t("add",function(t,e){e=e.split(",");for(var i=0;i<e.length;i++)-1==t.className.indexOf(e[i])&&(t.className=t.className.trim()+" "+e[i])}),c=t("remove",function(t,e){e=e.split(",");for(var i=0;i<e.length;i++)t.className=t.className.replace(e[i],"").trim()}),d=t("contains",function(t,e){for(var i=t.className.split(" "),n=!1,r=0;r<i.length;r++)i[r]==e&&(n=!0);return n}),h=function(t,e){var i=e.elements[t].getAttribute("data-amount")||0;return e.persistent&&null!=(amount=window.localStorage.getItem("kudos:saved:"+e.elements[t].getAttribute("data-url")))&&(i=amount),i},m=function(n,r,a){var s;try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){s=new XMLHttpRequest}s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var t=s.responseText;n.setAttribute("data-amount",t),"GET"==r&&(o(n,0==t?"alpha":"beta",a),a.persistent&&null!=window.localStorage.getItem("kudos:saved:"+n.getAttribute("data-url"))&&o(n,"gamma",a)),"POST"==r&&(e=n,i=t,a.persistent&&window.localStorage.setItem("kudos:saved:"+e.getAttribute("data-url"),i))}var e,i};var t="?url="+encodeURIComponent(n.getAttribute("data-url"));s.open(r,"http://api.kudosplease.com/"+t,!0),s.send()};return"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(t){this.elements=document.querySelectorAll(t.el),this.status=t.status,this.persistent=null==t.persistent||t.persistent&&null!=window.localStorage,this.duration=t.duration,this.timer={};for(var e=0;e<this.elements.length;e++){var i=this.elements[e];i.setAttribute("data-id",e),m(i,"GET",this),0==h(e,this)?(i.setAttribute("data-amount",0),this.timer[e]=-1,u(i,"touchstart",a,this),u(i,"touchend",s,this),u(i,"mouseover",n,this),u(i,"mouseout",s,this)):r(i,!1,this)}return this}}(),function(s,o){s.Casper||(s.Casper={}),s.Casper.stickyNavTitle=function(t){var e=o.querySelector(t.navSelector),i=o.querySelector(t.titleSelector),n=s.scrollY,r=!1;function a(){i.getBoundingClientRect().top+s.scrollY+(i.offsetHeight+35)<=n?e.classList.add(t.activeClass):e.classList.remove(t.activeClass),r=!1}s.addEventListener("scroll",function(){n=s.scrollY,function(){r||requestAnimationFrame(a);r=!0}()},{passive:!0}),a()}}(window,document);
//# sourceMappingURL=casper.js.map